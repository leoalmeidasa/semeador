<div class="min-vh-100 d-flex align-items-center justify-content-center" style="background-color: #f8f9fa;">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-5 col-lg-4">
        <div class="card border-0 shadow-lg rounded-4">
          <div class="card-body p-5">
            <!-- Logo/Ícone do Semeador -->
            <div class="text-center mb-4">
              <div class="d-inline-flex align-items-center justify-content-center rounded-circle mb-3"
                   style="width: 60px; height: 60px; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <!-- Ícone de semente/planta -->
                  <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2Z" fill="white"/>
                  <path d="M21 9C21 13.97 16.97 18 12 18C7.03 18 3 13.97 3 9C3 7.34 3.46 5.8 4.26 4.5C5.5 5.64 7.18 6.5 9 6.5H15C16.82 6.5 18.5 5.64 19.74 4.5C20.54 5.8 21 7.34 21 9Z" fill="white"/>
                  <path d="M12 18V22" stroke="white" stroke-width="2" stroke-linecap="round"/>
                  <path d="M8 20H16" stroke="white" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </div>
              <h4 class="fw-bold text-dark mb-1">Semeador</h4>
            </div>

            <h5 class="text-center text-dark mb-4">Acesse sua conta</h5>

            <!-- Form de Login -->
            <%= form_with(model: resource, as: resource_name, url: session_path(resource_name),
                          class: "needs-validation",
                          data: { turbo: true },
                          local: true, novalidate: true) do |f| %>

              <div class="mb-3">
                <%= f.label :email, "Seu email", class: "form-label text-muted small" %>
                <%= f.email_field :email,
                                  autofocus: true,
                                  class: "form-control form-control-lg border-0 border-bottom rounded-0 px-0 shadow-none",
                                  style: "background: transparent; border-color: #dee2e6 !important;",
                                  required: true %>
                <div class="invalid-feedback">
                  Por favor, insira um email válido.
                </div>
              </div>

              <div class="mb-3">
                <%= f.label :password, "Sua senha", class: "form-label text-muted small" %>
                <div class="position-relative">
                  <%= f.password_field :password,
                                       autocomplete: "current-password",
                                       class: "form-control form-control-lg border-0 border-bottom rounded-0 px-0 pe-5 shadow-none",
                                       style: "background: transparent; border-color: #dee2e6 !important;",
                                       required: true %>
                  <button type="button" class="btn btn-link position-absolute end-0 top-50 translate-middle-y p-0 me-2"
                          onclick="togglePassword()" style="z-index: 10;">
                    <svg width="20" height="20" fill="currentColor" class="text-muted" viewBox="0 0 24 24">
                      <path d="M12 4.5C7.5 4.5 3.73 7.61 3 12c.73 4.39 4.5 7.5 9 7.5s8.27-3.11 9-7.5c-.73-4.39-4.5-7.5-9-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                    </svg>
                  </button>
                </div>
                <div class="invalid-feedback">
                  Por favor, insira sua senha.
                </div>
              </div>

              <div class="text-end mb-4">
                <%= link_to "Esqueci minha senha",
                            new_user_password_path,
                            class: "text-decoration-none text-muted small",
                            data: { turbo: true } %>
              </div>

              <div class="d-grid mb-4">
                <%= f.submit "Entrar",
                             class: "btn btn-success btn-lg fw-semibold rounded-3 py-3",
                             style: "background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); border: none;" %>
              </div>
            <% end %>


            <div class="text-center">
              <span class="text-muted small">Ainda não possui conta? </span>
              <%= link_to "Faça o cadastro!", new_user_registration_path,
                          class: "text-success text-decoration-none fw-medium small",
                          data: { turbo: false } %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
    function togglePassword() {
        const passwordField = document.querySelector('input[type="password"]');
        const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordField.setAttribute('type', type);
    }

    // Bootstrap form validation
    (function() {
        'use strict';
        window.addEventListener('load', function() {
            var forms = document.getElementsByClassName('needs-validation');
            var validation = Array.prototype.filter.call(forms, function(form) {
                form.addEventListener('submit', function(event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>

<style>
    .form-control:focus {
        border-color: #22c55e !important;
        box-shadow: none !important;
    }

    .form-control.border-bottom:focus {
        border-bottom-color: #22c55e !important;
    }

    .btn-success:hover {
        background: linear-gradient(135deg, #16a34a 0%, #15803d 100%) !important;
    }
</style>